<head>
  <title>Tech test</title>
  <link rel="stylesheet" type="text/css" href="https://www.x3dom.org/download/x3dom.css">
  <script type="text/javascript" src="https://www.x3dom.org/download/x3dom.js"></script>
  <script type="text/javascript" src="/x3dom-patch.js"></script>
</head>

<body>
  {{> world}}
</body>

<template name="world">
   <div id="ui-overlay">
    <button id="clear-cubes">Restart game</button>
    <span>Score: {{playerScore}}</span>
  </div>

  <x3d>
    <scene>
      <viewpoint
      position="0 0 60"
      fieldOfView="0.8">
    </viewpoint>
      <!-- Floor -->
      <transform id="floor">
        <shape>
          <appearance>
            <material diffuseColor="#4A9"></material>
          </appearance>
          <plane center='0,0,-0.5' size="50 50"></plane>
        </shape>
      </transform>

      <!-- Dyn Cubes -->
      {{#each cubes}}
        <transform class="cube" id="{{_id}}" data-score={{score}} translation="{{x}} {{y}} {{z}}">
          <shape>
            <appearance>
              <material diffuseColor="{{color}}"></material>
            </appearance>
            <box size="1 1 1"></box>
          </shape>
        </transform>
      {{/each}}
    </scene>
  </x3d>
</template>
